<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style type="text/css" media="screen">
        body { font: 14px Helvetica, Verdana, Arial; }
        .almanac {
            width: 14em;
            margin: 1em 0;
            border: 1px solid #ccc;
            border-left: none;
            font-size: 1.25em;
        }
        
        .almanac:before, .almanac:after { content: " "; display: table; }
        .almanac:after { clear: both; }
        .almanac .weekdays span, .almanac .month .week .day {
            box-sizing: border-box;
            width: 2em;
            color: #333;
            line-height: 2em;
            text-align: center;
            border-left: 1px solid #ccc;
        }
        .almanac .weekdays span, .almanac div.month div.week div.day {
            float:left;
            display: inline-block;
            height: 2em;
        }
        .almanac table.month td { height: 4em; }
        .day > p { margin: 0; line-height: 1.2em;}
        .almanac .weekdays span { font-weight: bold; background-color: #f0f0f0; cursor: default; }

        .almanac .month .week .day { cursor: pointer; border-top: 1px solid #ccc; }
        .almanac .month .week .day:hover { background-color: #eee; }
        .almanac .month .week .day.other { color: #999; font-style: italic; }
        
        .almanac .selector { text-align: center; padding: 4px; background: #aaa; }
        .almanac .selector select { font-size: 2em; vertical-align: middle; margin-right: 4px; }

        .almanac.almanac-lg { width: 100%;}
        .almanac.almanac-lg table.month { width: 100%; border-collapse: collapse; }
        .almanac.almanac-lg .month .week .day { min-height:4em; }
        .almanac.almanac-lg .month .week .day, .almanac.almanac-lg .weekdays span { width: 14.2857143%; }

        .special { background: #d3dd94;}
    </style>
</head>
<body>
    <h1>Almanac Demo</h1>
    <h2>Static</h2>
    <div class="almanac" id="march">
        <div class="selector"><select><option>March</option></select><select><option>2015</option></select></div>
        <div class="weekdays"><span>Su</span><span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span></div>
        <div class="month">
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-01">1</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-02">2</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-03">3</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-04">4</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-05">5</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-06">6</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-07">7</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-08">8</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-09">9</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-10">10</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-11">11</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-12">12</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-13">13</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-14">14</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-15">15</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-16">16</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-17">17</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-18">18</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-19">19</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-20">20</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-21">21</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-22">22</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-23">23</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-24">24</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-25">25</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-26">26</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-27">27</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-28">28</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-29">29</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-30">30</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-31">31</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-01">1</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">2</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">3</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">4</span></div>
            </div>
        </div>
    </div>
    
    <h2>Generated <button disabled="disabled" id="asdf">Generate</button></h2>
    
    <h3>Example 1</h3>
    <div class="almanac" id="idx1"></div>
    <p><input type="text" value="" id="output1"></p>
    <hr style="clear:both">
    
    <h3>Example 2</h3>
    <div class="almanac almanac-lg" id="idx2"></div>
    <p><input type="text" value="" id="output2"></p>
    
    <script src="../src/almanac.js"></script>
    <script type="text/javascript" charset="utf-8">
        //window.onbeforeunload = function(evt) {
        //    var message = "Navigating away without saving will lose any unsaved changes.\n\nBe sure you saved your changes before leaving this page.";
        //    evt.returnValue = message;
        //    return message;
        //};
        var generate = function() {
            var el = document.getElementById('idx1');
            var e2 = document.getElementById('idx2');
            var today = new Date();
            var key = today.getFullYear() + '-' + Almanac.Utils.pad(today.getMonth() + 1) + '-' + Almanac.Utils.pad(today.getDate());
            var special1 = function(el, cdt) {
                if(cdt.day % 7 == 0) {
                    el.className += ' special';
                }
            };
            
            var special2_data = {};
            special2_data[key] = 'Here<br>it<br>is';
            console.log(special2_data);
            
            var special2 = function(el, cdt) {
                var s = cdt.toISOString();
                var p;
                if(cdt.is_current && (cdt.day % 7 == 0 || cdt.day % 3 == 0)) {
                    el.className += ' special';
                }
                if(special2_data.hasOwnProperty(s)) {
                    console.log(s);
                    p = Almanac.Utils.DOM.create('p', {'innerHTML': special2_data[s]})
                    el.appendChild(p);
                }
            };
            
            Almanac.create(el, {
                date: new Date(2015,3,1),
                day_post_create: special1,
                day_onclick: function() { document.getElementById('output1').value = this.dataset['date']; },
                year_range: '+10',
                tag: 'span'
            });

            Almanac.create(e2, {
                day_post_create: special2,
                day_onclick: 'output2',
                year_range: '-25',
                month_tag: 'table',
                week_tag: 'tr',
                day_tag: 'td',
            });
        };
        
        document.getElementById('asdf').onclick = generate;
        generate();
    </script>
</body>
</html>